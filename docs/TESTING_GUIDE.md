# VulWeb 测试指南

本指南帮助您测试VulWeb系统的各项功能。

## 前置准备

### 1. 确保系统已启动

```bash
cd ~/vulweb
./scripts/start.sh
```

等待系统启动完成（约10秒）。

### 2. 访问系统

在浏览器中打开：http://localhost:3000

## 功能测试

### 测试1: 首页Dashboard

1. 打开系统首页
2. 检查是否显示统计卡片：
   - 模型总数
   - 数据集数量
   - 训练任务
   - 运行中任务
3. 验证快速操作按钮是否可点击
4. 查看最近活动列表

**预期结果**: 
- 所有统计数据正确显示（初始为0）
- 快速操作按钮可跳转到对应页面
- 页面响应迅速

### 测试2: 上传数据集

1. 点击左侧菜单"数据集管理"
2. 点击"上传数据集"按钮
3. 填写信息：
   - 名称: 测试数据集
   - 描述: 用于测试的样本数据
4. 选择文件: `datasets/sample_dataset.json`
5. 点击"上传"

**预期结果**:
- 上传成功提示
- 数据集列表中显示新数据集
- 显示统计信息：
  - 格式: json
  - 样本数: 16
  - 漏洞样本: 8
  - 安全样本: 8

### 测试3: 上传模型

1. 点击左侧菜单"模型管理"
2. 点击"上传模型"按钮
3. 填写信息：
   - 名称: 测试模型
   - 描述: 用于测试的演示模型
   - 版本: 1.0.0
   - 类型: 漏洞检测
4. 选择一个模型文件（如果有）或跳过文件上传
5. 点击"上传"

**预期结果**:
- 上传成功提示
- 模型列表中显示新模型
- 显示模型信息

**注意**: 如果没有真实模型文件，可以创建一个空文件用于测试：
```bash
touch /tmp/test_model.pkl
```

### 测试4: 创建训练任务

1. 点击左侧菜单"训练任务"
2. 点击"创建训练任务"按钮
3. 填写信息：
   - 任务名称: 测试训练任务
   - 选择模型: 测试模型
   - 选择数据集: 测试数据集
   - 训练轮次: 5
4. 点击"创建并开始训练"

**预期结果**:
- 任务创建成功
- 任务列表中显示新任务
- 状态为"运行中"或"等待中"
- 进度条开始更新（如果训练已启动）

### 测试5: 查看训练指标

1. 在训练任务列表中
2. 找到刚创建的任务
3. 点击"查看"按钮

**预期结果**:
- 打开指标对话框
- 显示当前指标卡片（Loss, Accuracy等）
- 显示训练曲线图表
- 图表支持交互（缩放、提示）

### 测试6: AI对话

1. 点击左侧菜单"AI对话"
2. 在输入框输入："如何上传模型？"
3. 按Enter发送

**预期结果**:
- AI回复显示上传模型的步骤
- 回复格式化良好
- 消息显示在对话列表中

**更多测试问题**:
- "系统有多少个数据集？"
- "训练任务的状态是什么？"
- "系统有哪些功能？"

### 测试7: 快捷问题

1. 在AI对话页面底部
2. 点击任一快捷问题标签

**预期结果**:
- 问题自动填入输入框
- 自动发送并获得回复

### 测试8: 结果展示

1. 等待训练任务完成
2. 点击左侧菜单"结果展示"
3. 查看已完成的任务列表
4. 点击"查看详情"

**预期结果**:
- 显示已完成任务列表
- 显示最终准确率
- 显示训练时长
- 详情页显示完整训练曲线

### 测试9: 系统设置

1. 点击左侧菜单"系统设置"
2. 配置AI服务：
   - 选择服务商: 通义千问
   - 输入API Key (可选)
   - 设置Endpoint
3. 点击"保存配置"
4. 点击"测试连接"

**预期结果**:
- 配置保存成功
- 测试连接显示结果
- 配置持久化（刷新页面后仍存在）

### 测试10: 系统配置

1. 在系统设置页面
2. 调整系统参数：
   - 上传文件限制
   - 训练超时时间
   - 自动刷新开关
3. 点击"保存配置"

**预期结果**:
- 配置保存成功
- 参数生效

### 测试11: 暗黑模式

1. 点击页面右上角的月亮/太阳图标
2. 切换暗黑模式

**预期结果**:
- 页面主题切换
- 所有组件正确显示
- 切换流畅无闪烁

### 测试12: 删除功能

**删除数据集**:
1. 进入"数据集管理"
2. 点击数据集卡片上的删除图标
3. 确认删除

**删除模型**:
1. 进入"模型管理"
2. 点击模型卡片上的删除图标
3. 确认删除

**删除任务**:
1. 进入"训练任务"
2. 点击任务的"删除"按钮
3. 确认删除

**预期结果**:
- 弹出确认对话框
- 确认后成功删除
- 列表更新

### 测试13: 停止训练任务

1. 创建一个新的训练任务
2. 在任务运行时点击"停止"按钮

**预期结果**:
- 任务状态变为"已停止"或"失败"
- 进度停止更新

## 性能测试

### 测试14: 大文件上传

1. 创建或使用较大的数据集文件（>10MB）
2. 尝试上传

**预期结果**:
- 上传进度显示
- 成功上传或显示文件过大提示

### 测试15: 并发操作

1. 同时打开多个浏览器标签
2. 在不同标签中执行操作

**预期结果**:
- 操作互不干扰
- 数据保持一致

### 测试16: 页面刷新

1. 在任何页面按F5刷新
2. 使用浏览器前进/后退按钮

**预期结果**:
- 页面正确重新加载
- 路由导航正确
- 数据正确显示

## 错误处理测试

### 测试17: 无效数据格式

1. 尝试上传非JSON/CSV格式的文件作为数据集

**预期结果**:
- 显示错误提示
- 上传被拒绝

### 测试18: 重复名称

1. 尝试上传同名的模型或数据集

**预期结果**:
- 显示名称已存在的错误
- 上传失败

### 测试19: 空表单提交

1. 打开上传对话框
2. 不填写任何信息直接提交

**预期结果**:
- 表单验证提示
- 必填字段标红
- 提交被阻止

### 测试20: 网络错误模拟

1. 停止后端服务
2. 尝试执行任何操作

**预期结果**:
- 显示网络错误提示
- 不会导致页面崩溃

## 浏览器兼容性测试

在以下浏览器中测试：
- [ ] Chrome/Edge (推荐)
- [ ] Firefox
- [ ] Safari
- [ ] Opera

## 响应式测试

1. 调整浏览器窗口大小
2. 测试不同分辨率：
   - 桌面 (1920x1080)
   - 笔记本 (1366x768)
   - 平板 (768x1024)

**预期结果**:
- 布局自适应
- 功能正常使用
- 无横向滚动条

## 日志检查

### 查看后端日志

```bash
tail -f logs/backend.log
```

检查是否有错误或警告。

### 查看前端日志

```bash
tail -f logs/frontend.log
```

### 浏览器控制台

按F12打开开发者工具，检查：
- Console中是否有错误
- Network中API请求是否正常
- 资源加载是否正常

## 测试报告模板

```markdown
# VulWeb 测试报告

**测试日期**: YYYY-MM-DD
**测试人员**: [名字]
**测试环境**: 
- OS: Windows 11 + WSL2
- Browser: Chrome 120
- Backend: Python 3.10
- Frontend: Node.js 18

## 测试结果概览

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 首页Dashboard | ✅ PASS | |
| 上传数据集 | ✅ PASS | |
| 上传模型 | ✅ PASS | |
| 创建训练任务 | ✅ PASS | |
| 查看训练指标 | ✅ PASS | |
| AI对话 | ✅ PASS | |
| 结果展示 | ✅ PASS | |
| 系统设置 | ✅ PASS | |
| 删除功能 | ✅ PASS | |

## 发现的问题

1. [问题描述]
   - 严重程度: 高/中/低
   - 复现步骤: [步骤]
   - 预期行为: [描述]
   - 实际行为: [描述]

## 建议

1. [建议1]
2. [建议2]

## 总体评价

[系统总体评价]
```

## 自动化测试（可选）

### 后端API测试

```bash
cd backend
source venv/bin/activate
pytest tests/ -v
```

### 前端单元测试

```bash
cd frontend
npm test
```

## 压力测试（可选）

使用工具如Apache Bench或Locust进行压力测试：

```bash
# 安装Apache Bench
sudo apt-get install apache2-utils

# 测试API端点
ab -n 1000 -c 10 http://localhost:5000/api/models
```

## 测试数据清理

测试完成后清理数据：

```bash
# 删除测试数据库
rm backend/app.db

# 清理上传文件
rm -rf backend/uploads/*

# 清理日志
rm logs/*.log
```

## 问题反馈

如果发现任何问题，请：
1. 记录详细的复现步骤
2. 截图或录屏
3. 收集日志文件
4. 在GitHub创建Issue
